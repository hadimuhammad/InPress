<!DOCTYPE html>
<html lang="en">
  <head>
    <script type="text/javascript">
      function checkEmpty (value, letter, answer){
        if (value == ""){
            return "";
        }
        else{
          if (letter == answer){
            var string = '<b>'+letter + ") "+ value + '</b>';
            return string;
          }
          else{
            var string = letter + ") "+ value;
            return string;
          }
        }
      } 
      function ParseData(valueNeeded, questionNum)
      {
        console.log(assessmentName);
        var numberOfQuestions = 0;
        var ListOfAssessments = document.getElementById("ListOfAssessments").value;
        var QuestionData = document.getElementById("QuestionData").value;
        var jsonData = JSON.parse(ListOfAssessments);
        var jsonData2 = JSON.parse(QuestionData);
        for (var i in jsonData) {
            if (jsonData[i].fields.name == assessmentName){
              var assessmentPK = jsonData[i].pk;
              if (valueNeeded == "postdate"){
                console.log("date: "+jsonData[i].fields.post_date);
                return jsonData[i].fields.post_date;
              }
              console.log(assessmentPK);
            }
        }
        for (var j in jsonData2){
          numberOfQuestions = numberOfQuestions + 1;
          if (valueNeeded == "id" && numberOfQuestions==questionNum){
            //console.log ("Returning id");
            return jsonData2[j].pk;
          }
          if (valueNeeded == "Question" && numberOfQuestions==questionNum){
            //console.log ("Returning Question");
            return jsonData2[j].fields.Question_Data;
          }
          if (valueNeeded == "Type" && numberOfQuestions==questionNum){
            //console.log ("Returning type");
            if (jsonData2[j].fields.Question_Type == "SA")
              return "Short Answer";
            else
              return "Multiple Choice";
          }
          if (valueNeeded == "Answer" && numberOfQuestions==questionNum){
            //console.log ("Returning Answer");
            if (jsonData2[j].fields.Question_Type == "SA"){
              return jsonData2[j].fields.Question_Answer;
            }
            else{
              var answer = checkEmpty(jsonData2[j].fields.ChoiceA, "a", jsonData2[j].fields.Question_Answer) + '<br>' + checkEmpty(jsonData2[j].fields.ChoiceB, "b", jsonData2[j].fields.Question_Answer) + '<br>' + checkEmpty(jsonData2[j].fields.ChoiceC, "c", jsonData2[j].fields.Question_Answer) + '<br>' + checkEmpty(jsonData2[j].fields.ChoiceD, "d", jsonData2[j].fields.Question_Answer) + '<br>' + checkEmpty(jsonData2[j].fields.ChoiceE, "e", jsonData2[j].fields.Question_Answer);
              return answer;
            }
          }
        }
        return numberOfQuestions;
      }
    </script>
    <style type="text/css">
          form{display: inline;}
    </style>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../docs-assets/ico/favicon.png">

    <title>Student's Module - My Courses</title>

    <!-- Bootstrap core CSS -->
    <link href="/static/bootstrap/css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/static/css/sticky-footer-navbar.css" rel="stylesheet">
  </head>

  <body>
    {% block content %}
    <!-- Wrap all page content here -->
    <div id="wrap">
      <!-- Fixed navbar -->
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/student/index.html?studentnumber={{studentnumber}}">InPress - Student's Module</a>
          </div>
          <form name= "courseForm" action="course.html" method="get" id='courseForm'>
            <input type='hidden' id= 'courseInfo' name='courseInfo' value=''/>
            <input type='hidden' id= 'studentnumber5' name='studentnumber' value='{{studentnumber}}'/>
            <input type='hidden' id= 'QuestionData' name='QuestionData' value='{{QuestionData}}'/>
            <input type='hidden' id= 'questionNum' name='questionNum' value='{{QuestionNum}}'/>
            <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
              <li> <a href="/student/index.html?studentnumber={{studentnumber}}">Home</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">My Courses <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  {% for i in courses %}
                  <li><a href="javascript:{}" onClick="SubmitCourse('{{i}}');">{{i}}</a></li>
                  {% endfor %}
                </ul>
              </li>
            </ul>   
          </form> 
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/">Logout</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>


      <!-- Begin page content -->
    <div class="container">
      <div class="page-header">
        <h1> {{myCourse}} </h1>
        <!--{% for i in assessments %}-->
          <div class="panel panel-default">
           <div class="panel-heading">
              <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapse{{forloop.counter0}}">
                 {{assessmentName}} 
                </a>
              </h4>
            </div>
            <div id="collapse{{forloop.counter0}}" class="panel-collapse collapse">
              <div class="panel-body">
                <input type='hidden' id= 'QuestionData' name='QuestionData' value='{{QuestionData}}'/>
                <input type='hidden' id= 'ListOfAssessments' name='ListOfAssessments' value='{{ListOfAssessments}}'/>
                <input type='hidden' id= 'forloopcounter{{i}}' name='forloopcounter' value='{{forloop.counter0}}'/>
                <input type='hidden' id= 'NameOfAssessment' name='NameOfAssessment' value='{{assessmentName}}'/>
                <table class="table">
                  <script type="text/javascript">
                    var assessmentName = "{{assessmentName}}";
                    var forloop = document.getElementById("forloopcounter"+assessmentName).value
                    document.write('<div class="input-group date" id="dp"'+forloop+'"+ data-date="12-02-2012" data-date-format="yyyy-mm-dd">')
                    document.write ('<form name= "modifyAssessment" action="addassessment.html" method="POST" id=\'modifyAssessment\'>');
                    document.write('<input type=\'hidden\' id= \'course\' name=\'course\' value=\'{{myCourse}}\'/>')
                    document.write('<input type=\'hidden\' id= \'AssessmentName\' name=\'AssessmentName\' value=\'{{assessmentName}}\'/>')
                    var postdate = ParseData("postdate",0,assessmentName);
                    document.write('Effective Date: <b><label class="control-label" id="date'+forloop+'">'+postdate+'</label></b>');
                    document.write ("</form>");
                    document.write ("</div>");
                    var assessmentName = "{{i}}"
                    document.write('<tr>');
                    document.write('<th>id</th>');
                    document.write('<th>Question</th>');
                    document.write('<th>Type</th>');
                    document.write('<th>Answer</th>');
                    document.write('</tr>');
                    var assessmentName = "{{i}}"
                    var numberOfQs = ParseData("",0,assessmentName);
                    console.log("numberOfQs"+numberOfQs);
                    for (i=1; i<=numberOfQs; i++){
                      var questionId = ParseData("id", i, assessmentName);
                      document.write ('<form name= "removeQuestion" action="course.html" method="POST" id=\'removeQuestion\'>');
                      document.write('<input type='+'hidden'+' id='+'QuestionToRemove'+' name='+'QuestionToRemove'+' value='+''+'/>')
                      document.write('<tr>');
                      document.write('<td>'+i+'</td>');
                      document.write('<td>'+ParseData("Question", i, assessmentName)+'</td>');
                      document.write('<td>'+ParseData("Type", i, assessmentName)+'</td>');
                      document.write('<td>'+ParseData("Answer", i, assessmentName)+'</td>');
                     
                      document.write('</tr>');
                      document.write('</form>');
                    }
                  </script>
                </table>
              </div>
            </div>
          </div>
        <!--{% endfor %}-->
      <br><br>
      <br><br>
      <form name= "existingTests" action="studentCourseHistory.html" method="get" id='existingTests'>
      <input type='hidden' id= 'course' name='course' value='{{myCourse}}'/>
      <input type='hidden' id= 'studentnumber3' name='studentnumber' value='{{studentnumber}}'/>
      <a href="javascript:{}" onClick="ExistingTests('{{myCourses}}');" class="btn btn-default btn-sm" role="button"> Back to all the exisiting test(s) and quizz(es). </a>
      </form>
      </div>
    </div>
    </div>
    <div class="container">
        <p class="text-muted">InPress - Student's Module ({{myCourse}})</p>
    </div>


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="/static/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" language="JavaScript"><!--
    function DoSubmission(index) {
          document.getElementById("MyForm").submit();
    }
    //--></script>
    <script type="text/javascript" language="JavaScript"><!--
    function DoSubmission2(index) {
          document.getElementById("MyForm2").submit();
    }
    //--></script>
    <script type="text/javascript" language="JavaScript"><!--
    function SubmitCourse(index) {
          document.getElementById("courseInfo").value = index;
          document.getElementById("courseForm").submit();
    }
    //--></script>
    <script type="text/javascript" language="JavaScript"><!--
    function AddQuestion(index) {
          document.getElementById("assessment").value = index;
          document.getElementById("addQuestion").submit();
    }
    //--></script>
    <script type="text/javascript" language="JavaScript"><!--
    function RemoveQuestion(index) {
          document.getElementById("QuestionToRemove").value = index;
          document.getElementById("removeQuestion").submit();
    }
    //--></script>
    <script type="text/javascript" language="JavaScript"><!--
    function ExistingTests(index) {
          document.getElementById("course").value = index;
          document.getElementById("existingTests").submit();
    }
    //--></script>
  
    {% endblock %}
  </body>
</html>

